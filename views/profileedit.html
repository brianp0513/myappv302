<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="../css/all.min.css" rel="stylesheet">
    <link href="../css/app.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/animate.css">
    <script>
            function onload() { 
    
            //let temp = Document.getElementById("modibutton");
            var password = document.getElementById('password');
            var sns = document.querySelector("#socialMedia");
            var img = document.querySelector('#getfile');
            
            }
    
            function modifyAlert(){
                console.log("12" +temp);
    
                console.log("12" +foo);
                //alert("mouse entered!");
                console.log("12" +password);
                    // alert('this is password length' + foo);
                //   alert('this is password length' + temp);
                alert('this is password length' + password);
                if(sns.length != 0){
                        alert('this is password length' + password.length);
                    if(password.length > 0){
    
                        
                        alert('SNS user cannot change password!');
                    }
                    if(img.length > 0){
                            alert('SNS user cannot change profile image!');
                    }
                    else{
                        alert(sns.length);
                        alert('profile successfully changed!');
                    }
                }
                else{
                    if(password.length ==0){
                        alert('invalid password');
                    }
                    else{
                        alert('profile successfully changed!');
                    }
                }
            }
            password.onchange = function(){
                if(sns.length > 0){
                    if(password.length > 0){
                        alert('SNS user cannot change password!');
                    }
                }
                else{
                    if(password.length ==0){
                        alert('invalid password');
                    }
                }
            }
        
    
    
            function readURL(input){
                if(input.files && input.files[0]){
                    const reader = new FileReader();
    
                    reader.onload = function (e){
                        $('#image_section').attr('src',e.target.result);
                    }
    
                    reader.readAsDataURL(input.files[0]);
                }
            }
    
            $("#imgInput").change(function(){
                readURL(this);
            });
    
    
    
    
        </script>
    <title>Welcome to PSE's Blog</title>
  </head>
  <body class="page" onload="onload();">
    <a id="scrolltoTop" class="shadow-lg">
        Top
    </a>
	<!-- =========================================================================================nav bar===================================================================================================== -->
	<!-- 메뉴바 색깔과 글자를 바꾸는 클래스 -->
	<!-- fixed top : element가 상단에 고정된다. -->
    <nav id="primary-navbar" class="navbar navbar-expand-lg navbar-transparent fixed-top rgba-black-light">
            <div class="container">
                <!-- 좌측 상단의 웹사이트 제목 부분 -->
                <a class="navbar-brand" href="../views/index.html" data-toggle="tooltip" data-placement = "bottom" title="This is my website"><img src = "../images/logo.jpg" alt="logo" width = "150px"></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
            
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                    <a class="nav-link text-center" href="../views/index.html"><i class = "fa fa-home fa-lg "></i><p>Home</p><span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link text-center" href="../views/intro.html"><i class = "fa fa-info fa-lg"></i><p>Intro</p></a>
                    </li>
                    <li class="nav-item dropdown text-center">
                        <!-- 페이지 아이콘 -->
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class = "fas fa-book-open fa-lg"></i><p>Page</p>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="../views/page.html">Page</a>
                        <a class="dropdown-item" href="page.html">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="page.html">Something else here</a>
                    </div>
                    </li>
                    <li class="nav-item">
                        <!-- 블로그아이콘 -->
                    <a class="nav-link text-center" href="blog.html" tabindex="-1" aria-disabled="true"><i class = "fa fa-rss fa-lg"></i><p>Blog</p></a>
                            </li>
                            <!-- Project mega menu for PC -->
                            <li class="nav-item dropdown dropdown-wide d-lg-block d-none">
                                    <a class="nav-link text-center dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class = "fa fa-th-large fa-lg"></i><p>Project</p>
                                    </a>
                                    <div class="dropdown-menu w-75" aria-labelledby="navbarDropdown">
                                        <div class="container-fluid py-4" id="mega-menu">
                                            <div class="row">
                                                <div class="col-xl-3">
                                                    <h5>
                                                        <strong class = "text-danger">Project title</strong>
                                                    </h5>
                                                   <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                                   <img src="../images/landscape.jpg" alt="landscape" class="img-fluid round mt-3">
                                                </div>
                                                <div class="col-xl-9">
                                                    <h5><strong class="text-success">our project below</strong></h5>
                                                    <div class="dropdown-divider mt-3 mb-4"></div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <form method="GET" action="/loginpage" class="dropdown-item">
                                                                <input type="image" src="../images/loginpage.PNG" alt="loginpage.jpg" class="img-fluid shadow-lg">
                                                            </form>
                                                            <br>
                                                            <h6>
                                                                <strong>Login Project</strong>
                                                            </h6>
                                                        </div>
                                                        <div class="col">
                                                                <div class="col">
                                                                        <img src="../images/Modify.gif" alt="modify.gif" class="img-fluid shadow-lg">
                                                                        <a href="../views/alterfrontpage.ejs" class="dropdown-item"></a>
                                                                        <br>
                                                                        <h6>
                                                                            <strong>Project 2</strong>
                                                                        </h6>
                                                                    </div>
                                                        </div>
                                                        <div class="col">
                                                                <div class="col">
                                                                        <img src="../images/Modify.gif" alt="modify.gif" class="img-fluid shadow-lg">
                                                                        <a href="../views/alterfrontpage.ejs" class="dropdown-item"></a>
                                                                        <br>
                                                                        <h6>
                                                                            <strong>Project 3</strong>
                                                                        </h6>
                                                                    </div>
                                                        </div>
                                                    </div>
                                                    This is the project list that I make and research by myself. Some of the content are in https environment but mostly I worked in localhost environment.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    </li>
                                    <!-- Project mega menu for mobile -->
                                        <li class="nav-item dropdown d-block d-lg-none">
                                                <a class="nav-link text-center dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <i class = "fa fa-th-large fa-lg"></i><p>Project</p>
                                                </a>
                                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                    <a class="dropdown-item" href="../views/alterfrontpage.ejs">Login project</a>
                                                    <a class="dropdown-item" href="page.html">project 2</a>
                                                    <a class="dropdown-item" href="page.html">project 3</a>
                                                </div>
                                                </li>
                                    <!-- 연락처 아이콘 -->
                    <li class="nav-item">
                            <a class="nav-link text-center" data-toggle="modal" data-target="#modal-contact" href="#" tabindex="-1" aria-disabled="true"><i class = "fa fa-envelope fa-lg"></i><p>Contact</p></a>
                            </li>
                            <!-- 예약 아이콘 -->
                    <li class="nav-item">
                            <a class="nav-link text-center" href="reservation.html" tabindex="-1" aria-disabled="true"><i class = "fa fa-desktop fa-lg"></i> <p>Reservation</p></a>
                            </li>
                            <li class="nav-item">
                                <!-- 로그인 상태에 대한 redirect부분 변경 함수-->
                                <script>
                                    function LPchange(){
                                        const profileurl = '/showprofile';
                                        const loginurl = '../views/login.html';
                                        if(sessionStorage.getItem("name")==null){
                                        
                                        location.pathname = loginurl;
                                    }
                                    else{
                                          
                                        location.pathname = profileurl;
                                    }
                                    }
                                </script>
                                <!-- 실질적 로그인 상태 : 이름은 상태에 따라 바로바로 바뀌고 라우터 경로는 클릭시 변경된다. -->
                                    <a class="nav-link text-center" onclick="LPchange()" tabindex="-1" aria-disabled="true"><i class="fas fa-vector-square fa-lg"></i><p>
                                        <!-- 로그인상태에 따른 버튼이름이 프로필, 로그인 버튼의 스위칭 -->
                                        <script>
                                    if(sessionStorage.getItem("name")==null){
                                        
                                        document.write('Login');
                                    }
                                    else{
                                       
                                        document.write('profile');
                                    }
                                    </script></p></a>
                                </li> 
                    <li class="nav-item" tabindex="-1" aria-disabled="true">
                            <a class="nav-link text-center" onclick="LPchange()" tabindex="-1" aria-disabled="true">
                                <p>Hello, <script>
                                        if(sessionStorage.getItem("name") == null){
                                            document.write('Guest');
                                        }
                                        else{
                                            document.write(sessionStorage.getItem("name"));
                                            console.log('this is sessionStorage : ',sessionStorage.getItem("name"));
                                        }
                                        </script></p>
                            </a>
                            <script>
                                function LIO(){
                                        const loginurl = '../views/login.html'
                                        const logouturl = '../views/index.html'
                                    if(sessionStorage.getItem("name")==null){
                                        location.pathname = loginurl;        
                                    }
                                    else{
                                        sessionStorage.clear();
                                        location.pathname = logouturl;
                                    }
                                }
                            </script>
                            <a class="nav-link text-center" style="float:inline-end" onclick="LIO();" tabindex="-1" aria-disabled="true"><h6><script>
                                if(sessionStorage.getItem("name") == null){
                                            
                                        }
                                        else{
                                            document.write('Logout');
                                        }
                            </script></h6></a>
                            
                            
                    </li>
                           
                </ul>
                </div>
            </div>
        </nav>
<!-- =============================================================================modal contact========================================================================================================== -->
<div class="modal fade bd-example-modal-lg" id="modal-contact" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content">
                <div class="modal-header">
                        <h5 class="modal-title text-info" id="exampleModalLabel">Contact me</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <p class="bold">Thank you for contact me. I will call you ASAP in real Time. Please fill in the space below.</p>
                            <br>
                            <form>
                                <div class="form-row mb-3">
                                    <div class="col-3">
                                        <input type="text" class="form-control" placeholder="Your name">
                                    </div>
                                    <div class="col-3">
                                            <input type="text" class="form-control" placeholder="Your Phonenumber">
                                    </div>
                                    <div class="col-6">
                                            <input type="email" class="form-control" placeholder="example@email.com">
                                    </div>
                                </div>
                                <div class="form-group">
                                        <input type="text" class="form-control" placeholder="Subject">
                                </div>
                                <div class="form-group">
                                    <textarea rows="4" class="form-control" placeholder="write message..."></textarea>
                                </div>
                                <button type = "submit" class="btn btn-light">Sign In</button>
                            </form>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                      </div>
          </div>
        </div>
      </div>
        <!-- ==============================================jumbotron=================================== -->
    <section class="jumbotron jumbotron-fluid mb-0 wow fadeInDown">
        <div class="section-content">
            <div class="container text-center text-white rgba-black-light p-5 my-5">
                    <h1 class="display-4 font-weight-bold">modifying your profile</h1>
                    <p class="lead"> If you register your account through this blog, you can edit your all your information. However, if you registered through sns, you cannot change some of information. </p>             
            </div>
        </div>
    </section>
    <!-- ===================================================profileEdit content=================================================== -->
    <section id="page-content" class="main main-raised-square">
            <div class="section-content">
                <div class="container">
                    <div class="row-vh d-flex flex-row justify-content-center">
                        <article class=" mb-5 wow fadeInLeft text-center">
                                    
                                            <div class ="text">
                                                <form method ="POST" action = "/login/modicomplete">
                                                   <td border = "0" outline = "0" height = "600px" width = "650px">
                                                       <!-- 첫번쨰 가로 는 가로(colspan)로 4칸 확장하고  세로확장은 기본값(rowspan = "1")-->
                                                       <tr>
                                                           <td colspan="4" ><h2><strong>userID profile</strong></h2></td>
                                                       </tr>
                                                       <!-- 2번쨰 가로는 첫번쨰 그림은 가로로 2칸 세로로 2칸 확장했다. -->
                                                       <tr>
                                                           <td colspan="2" rowspan="2"><img src = "/images/<%=userInfo.img%>" id="preview" height ="250px" width="200px">
                                                                                        <a id="download" download="thumbnail.jpg" target = "_blank">
                                                                                            <img id = "thumbnail" src = "" width = "100px" heigh = "100px" alt = "thumbnail (click to download)">    
                                                                                        </a>
                                                                                        <input type = "file" id = "getfile" name = "imgInput" />
                                                                                        <script>
                                                                                            const file = document.querySelector('#getfile');
                                                                                            file.onchange = function(){
                                                                                                const fileList = file.files ; 
                                                                                                //읽기
                                                                                                const reader = new FileReader();
                                                                                                reader.readAsDataURL(fileList [0]);
                        
                                                                                                //로드 이후
                                                                                                reader.onload = function(){
                                                                                                    //로컬이미지 보여주기
                                                                                                    document.querySelector('#preview').src = reader.result;
                        
                                                                                                    //썸제일 이미지 생성
                                                                                                    const tempImage = new Image();//drawImage 메소드에 넣기 위해 이미지 객체화
                                                                                                    tempImage.src = reader.result;//data-url를 이미지 객체에 주입
                                                                                                    tempImage.onload = function(){
                                                                                                        //리사이즈를 위해 캔버스 객체 생성
                                                                                                        const canvas = document.createElement('canvas');
                                                                                                        const canvasContext = canvas.getContext("2d");
                        
                                                                                                        //캔버스 크기 설정
                                                                                                        canvas.width = "100px";
                                                                                                        canvas.height = "100px";
                        
                                                                                                        //이미지를 캔버스에 그리기
                                                                                                        canvasContext.drawImage(this, 0,0,100,100);
                                                                                                        //캔버스에 그린 이미지를 다시 data-url 형태로 변환
                                                                                                        const dataURL = canvas.toDataURL("image/jpeg");
                        
                                                                                                        //썸네일 이미지 보여주기
                                                                                                        document.querySelector('#thumbnail').src = dataURL;
                        
                                                                                                        //썸네일 이미지를 다운로드 할수 있도록 링크 설정
                                                                                                        document.querySelector('#download').href = dataURL;
                                                                                                    };
                                                                                                };
                                                                                            };
                                                                                        </script>
                                                                                        
                                                                                    </td>
                                                                                                    <hr>                                                                
                                                            <td><p><strong>Firstname</strong></p><td><input  class = "form-control"type = "text" value = "<%=userInfo.Firstname%>" name = "Firstname"></td>
                                                        </tr>
                                                        <!-- 뇌피셜이지만 firstname을 집어넣은후 공간이남아 lastname이 빨려들어간거 같다. -->
                                                        <tr>
                                                            <td><p><Strong>Lastname</Strong></p></td> <td><input class="form-control" type = "text" value = "<%=userInfo.Lastname%>" name = "Lastname"></td>
                                                        </tr>
                                                        <!-- ID,password, Address의 값이 들어가는 곳은 가로로 3칸 확장시켰다. -->
                                                                                                    <hr>
                                                        <tr>
                                                                <td><p><strong>ID</strong></p></td> <td colspan="3"><p> <%=userInfo.ID%></p></td>
                                                                <input type = "hidden" value = "<%=userInfo.ID%>" name = "ID">
                                                        </tr>
                                                        <tr>
                                                                <td><p><strong>Password</strong></p></td> <td colspan="3"><input type = "text" class="form-control" id = "password" placeholder="type new PW" name = "PW"></td>
                                                        </tr>
                                                                                                    <hr>
                                                        <tr>
                                                                <td><p><strong>Address</strong></p></td> <td colspan = "3">
                                                                    <input class="form-control" type = "text" value = "<%=userInfo.Address.Street%>" name = "Street"> <br>
                                                                    <input type = "text" class="form-control" value = "<%=userInfo.Address.City%>" name = "City"> <br>
                                                                    <input type = "text" class="form-control" value = "<%=userInfo.Address.State%>" name = "State"> <br>
                                                                    <input type = "text" class="form-control" value = "<%=userInfo.Address.Country%>" name = "Country"></td>
                                                            </tr>
                                                            <br>
                                                            <!-- 마지막 가로는 각각의 버튼이 2개의 가로를 확장했다. -->
                                                        <tr>
                                                                                <input type = "hidden" id = "socialMedia" value = "<%=userInfo.sns%>" name = "sns">
                                                                                <input type = "hidden"  id = "img" value = "<%=userInfo.img%>" name = "picture">
                                                                                <input type = "hidden" id = "temp" value = "<%=userInfo.PW%>" name = "originalPW">
                                                                                <input type = "hidden" value = "<%=userInfo._id%>" name = "objID">
                                                                <td colspan="2"><input type = "image"  id = "modibutton" onclick="modifyAlert()" src = "../images/modify.jpg" height = "75px" width = "200px"></td>
                                                        </tr>
                                                        </form>
                                                        </tr>
                        
                                                   </table>
                                                </form>
                                            </div> 
                                    

 
                        </article>
                    </div>
                </div>
            </div>
        </section>
            <!-- ======================================Footer===================== -->
    <footer class="footer py-5">
            <div class="container wow fadeInUp">
                <div class="section-content">
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <a href="index.html" class="text-warning">
                                <h5>My Website</h5>
                                <p>
                                    This is the part is that explaining about my website. Bascally I modify front page with using multiple plugin and front skill.
                                </p>
                            </a>
                        </div>
                        <div class="col-md-2 d-none d-md-block mb-4">
                            <h5>Projects</h5>
                            <ul class="list-unstyled">
                                <li>
                                    <a href="page.html" class="text-muted"> project 1</a>
                                </li>
                                <li>
                                    <a href="page.html" class="text-muted"> project 2</a>
                                </li>
                                <li>
                                    <a href="page.html" class="text-muted"> project 3</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-2 d-none d-md-block mb-4">
                                <h5>Page</h5>
                                <ul class="list-unstyled">
                                    <li>
                                        <a href="page.html" class="text-muted"> page 1</a>
                                    </li>
                                    <li>
                                        <a href="page.html" class="text-muted"> page 2</a>
                                    </li>
                                    <li>
                                        <a href="page.html" class="text-muted"> page 3</a>
                                    </li>
                                </ul>
                            </div>
                        <div class="col-md-4 mb-4">
                            <div class="card card-body bg-danger">
                               <div class="card-text">
                                   <div class="text-white d-flex justify-content-start">
                                      <i class="fas fa-phone fa-4x mr-5"></i>
                                      <div class="icon-list-content">
                                          <div>
                                              <p class="my-0">Phone Call</p>
                                          </div>
                                          <div>
                                              <p class="lead">
                                                  <a href="tel:02-111-1111" class="text-white">
                                                      <strong>02-111-111</strong>
                                                  </a>
                                              </p>
                                          </div>
                                      </div> 
                                   </div>
                                   <hr class="hr-white mt-0 mb-3">
                                   <div class="text-white">
                                       <span>
                                            <i class="fa fa-envelope fa-lg mr-3"></i>
                                            <a href="park19960513@gmail.com" class="text-white">
                                                    <strong>park19960513@gmail.com</strong>
                                            </a>
                                       </span> 
                                   </div>
                                   <br>
                                   <div class="text-white">
                                       <span>
                                           <i class="fa fa-homr fa-lg mr-3"></i>
                                           <strong>Some kind of company address</strong>
                                       </span>
                                   </div>
                               </div> 
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="my-5">
                <ul class="social-icons list-unstyled d-flex justify-content-center">
                    <li class="mx-2">
                        <a href="#" style="color: #00aced;">
                            <i class="fab fa-twitter fa-2x"></i>
                        </a>
                    </li>
                    <li class="mx-2">
                            <a href="#" style="color: #3b5998;">
                                <i class="fab fa-facebook-square fa-2x"></i>
                            </a>
                    </li>
                    <li class="mx-2">
                            <a href="#" style="color: #d34836;">
                                <i class="fab fa-google-plus fa-2x"></i>
                            </a>
                    </li>
                    <li class="mx-2">
                            <a href="#" style="color: #cc181e;">
                                <i class="fab fa-youtube fa-2x"></i>
                            </a>
                    </li>
                </ul>
                <div class="copyright text-center text-muted mt-4">
                    Copyright &copy;
                    <script>
                        document.write(new Date().getFullYear())
                    </script> MyWebsite. All Rights Reserved.
                </div>
            </div>
        </footer>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script type="text/javascript" src="../js/wow.min.js"></script>
        <script>
            new WOW().init();
        </script>
        <script src = "../js/shadow.js"></script>
        <script src = "../js/scroll.js"></script>
      </body>
    </html>